<?xml version="1.0"?>
<root main_tree_to_execute="MainTree">
  <BehaviorTree ID="MainTree">

    <PipelineSequence name="navigate_through_poses_no_replan">

      <!-- PLAN ONCE for all waypoints -->
      <ComputePathThroughPoses goals="{goals}" path="{path}" planner_id="GridBased"/>

      <!-- FOLLOW + single recovery (NO replanning) -->
      <RecoveryNode name="recovery_no_replan" number_of_retries="10">
        <!-- Child 1: main task -->
        <RateController hz="10.0">
          <FollowPath path="{path}" controller_id="FollowPath" goal_checker_id="general_goal_checker"/>
        </RateController>

        <!-- Child 2: recovery action (wait; no spin, no replan) -->
        <Wait wait_duration="1.0"/>
      </RecoveryNode>

      <GoalReached/>

    </PipelineSequence>

  </BehaviorTree>
</root>
